{"ast":null,"code":"import _slicedToArray from\"/Users/sylviayu/Desktop/project/create-vinyl-record/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';var inc=5;var getPixelRatio=function getPixelRatio(context){var backingStore=context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/backingStore;};//sound  \nvar convertHexToRGBA=function convertHexToRGBA(hexCode,opacity){var hex=hexCode.replace('#','');var r=parseInt(hex.substring(0,2),16);var g=parseInt(hex.substring(2,4),16);var b=parseInt(hex.substring(4,6),16);return\"rgba(\".concat(r,\",\").concat(g,\",\").concat(b,\",\").concat(opacity/100,\")\");};//start of function\nvar Canvas=function Canvas(props){var keycode=props.keycode,setKey=props.setKey,allData=props.allData,setAllData=props.setAllData,scale=props.scale;var canvasRef=useRef(null);var draw=function draw(ctx,frameCount){var new_data={};Object.keys(allData).forEach(function(ind){if(ind==scale){for(var i=0;i<allData[ind].length;i++){var item=allData[ind][i];if(item.key.localeCompare(keycode)==0){item.opa+=inc;item.col_display=convertHexToRGBA(item.col_origin,item.opa);}else{continue;}}new_data[ind]=allData[ind];}else{new_data[ind]=allData[ind];}});setAllData(new_data);Object.entries(allData).forEach(function(entry){var _entry=_slicedToArray(entry,2),key=_entry[0],value=_entry[1];value.forEach(function(item,index){ctx.beginPath();ctx.lineWidth=20;ctx.strokeStyle=item.col_display;var count=12;var part=2*Math.PI/count;var start=index*part;var radius=key*60;ctx.arc(350,350,radius,start,part+start);ctx.stroke();});});setKey('');};useEffect(function(){var canvas=canvasRef.current;var context=canvas.getContext('2d');var frameCount=0;var ratio=getPixelRatio(context);var width=window.getComputedStyle(canvas).getPropertyValue('width').slice(0,-2);var height=getComputedStyle(canvas).getPropertyValue('height').slice(0,-2);canvas.width=width*ratio;canvas.height=height*ratio;canvas.style.width=\"\".concat(width,\"px\");canvas.style.height=\"\".concat(height,\"px\");draw(context,frameCount);},[keycode]);return/*#__PURE__*/React.createElement(\"canvas\",{ref:canvasRef,style:{width:window.innerWidth,height:window.innerHeigh}});};export default Canvas;","map":{"version":3,"sources":["/Users/sylviayu/Desktop/project/create-vinyl-record/src/Draw/Canvas.js"],"names":["React","useRef","useEffect","useState","inc","getPixelRatio","context","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","window","devicePixelRatio","convertHexToRGBA","hexCode","opacity","hex","replace","r","parseInt","substring","g","b","Canvas","props","keycode","setKey","allData","setAllData","scale","canvasRef","draw","ctx","frameCount","new_data","Object","keys","forEach","ind","i","length","item","key","localeCompare","opa","col_display","col_origin","entries","entry","value","index","beginPath","lineWidth","strokeStyle","count","part","Math","PI","start","radius","arc","stroke","canvas","current","getContext","ratio","width","getComputedStyle","getPropertyValue","slice","height","style","innerWidth","innerHeigh"],"mappings":"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","sourcesContent":["\nimport React, { useRef, useEffect, useState } from 'react'\n\nconst inc = 5\n\n\n\nconst getPixelRatio = context => {\n  var backingStore =\n  context.backingStorePixelRatio ||\n  context.webkitBackingStorePixelRatio ||\n  context.mozBackingStorePixelRatio ||\n  context.msBackingStorePixelRatio ||\n  context.oBackingStorePixelRatio ||\n  context.backingStorePixelRatio ||\n  1;\n  \n  return (window.devicePixelRatio || 1) / backingStore;\n};\n\n\n//sound  \nconst convertHexToRGBA = (hexCode, opacity) => {\n\n  const hex = hexCode.replace('#', ''); \n  \n  const r = parseInt(hex.substring(0, 2), 16);\n  const g = parseInt(hex.substring(2, 4), 16);\n  const b = parseInt(hex.substring(4, 6), 16);\n\n  return `rgba(${r},${g},${b},${opacity / 100})`;\n};\n\n\n\n\n//start of function\nconst Canvas = props=> {\n  const { keycode, setKey, allData, setAllData, scale } = props\n  const canvasRef = useRef(null)\n\n  \n\n  const draw = (ctx, frameCount) => {\n    let new_data = {}\n    Object.keys(allData).forEach(ind => {\n      if (ind == scale){\n        for (let i = 0; i < allData[ind].length; i++){\n          let item = allData[ind][i]\n          if (item.key.localeCompare(keycode) == 0){\n            item.opa += inc\n            item.col_display = convertHexToRGBA(item.col_origin, item.opa)\n            \n          }\n          else{\n            continue;\n          }\n\n        }\n\n        new_data[ind] = allData[ind]\n\n     }else{\n       \n       new_data[ind] = allData[ind]\n       \n     }\n    })\n\n    setAllData(new_data)\n\n  \n    \n    Object.entries(allData).forEach(entry => {\n      const [key, value] = entry;\n      value.forEach((item, index) => {\n        ctx.beginPath(); \n        ctx.lineWidth = 20;\n\n        ctx.strokeStyle = item.col_display\n        let count = 12\n\n        let part = 2*Math.PI / count\n        let start = index* part\n        let radius = key* 60\n        ctx.arc(350, 350, radius, start, part+start)\n        ctx.stroke()\n      \n      })\n    });\n\n  \n\n\n    setKey('')\n    \n  }\n\n\n\n\n\n  \n  useEffect(() => {\n    \n    const canvas = canvasRef.current\n    const context = canvas.getContext('2d')\n    let frameCount = 0\n\n\n\n\n    let ratio = getPixelRatio(context);\n    let width = window.getComputedStyle(canvas)\n        .getPropertyValue('width')\n        .slice(0, -2);\n    let height = getComputedStyle(canvas)\n        .getPropertyValue('height')\n       .slice(0, -2);\n    canvas.width = width * ratio;\n    canvas.height = height * ratio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    \n\n\n    draw(context, frameCount)\n \n  }, [keycode])\n  \n  return <canvas ref={canvasRef} style={{ width: window.innerWidth, height: window.innerHeigh}}/>\n}\n\nexport default Canvas"]},"metadata":{},"sourceType":"module"}