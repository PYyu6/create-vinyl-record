{"ast":null,"code":"import _defineProperty from\"/Users/sylviayu/Desktop/project/create-vinyl-record/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/sylviayu/Desktop/project/create-vinyl-record/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sylviayu/Desktop/project/create-vinyl-record/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Canvas from'./Draw/Canvas';import'./App.css';// import CanvasDraw from './CanvasDraw'\n// import useKey from './useKey'\nimport{useState,useEffect}from'react';import useEventListener from\"./use-event-listener\";import ChordsAnimation from\"./Draw/ChordsAnmation\";import initialData from\"./Data/initialData\";import chordsData from\"./Data/chordsData\";function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),key=_useState2[0],setKey=_useState2[1];var _useState3=useState(3),_useState4=_slicedToArray(_useState3,2),octave=_useState4[0],setOctave=_useState4[1];var _useState5=useState(initialData),_useState6=_slicedToArray(_useState5,2),allData=_useState6[0],setAllData=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),audio=_useState8[0],setAudio=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),pitch=_useState10[0],setPitch=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),chord=_useState12[0],setChord=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),playChord=_useState14[0],setPlayChord=_useState14[1];var process_chord=function process_chord(new_pitch){if(!(new_pitch in chord)&&!playChord){var ind=chordsData[new_pitch];setChord(_objectSpread({},chord,_defineProperty({},new_pitch,ind)));if(Object.keys(chord).length>2){setPlayChord(true);var all_notes=Object.keys(chord);all_notes.forEach(function(item,index,arr){arr[index]=item+\"5\";});setChord({});}}};useEventListener(\"keydown\",function(event){setKey(event.key);var temp=allData[1].filter(function(item){return item.key.localeCompare(event.key)==0;})[0];if(typeof temp==='undefined'){return;}setPitch(temp.pitch);process_chord(temp.pitch);});useEffect(function(){var note=pitch+octave;if(audio){audio.play(note);setPitch('');}else{console.log(\"not set yet\");}},[pitch]);var handleClick=function handleClick(){var note=pitch+octave;if(audio){audio.play(note);}else{console.log(\"not set yet\");}};useEffect(function(){var Soundfont=require('soundfont-player');var audioContext=new AudioContext();Soundfont.instrument(audioContext,'acoustic_grand_piano').then(function(soundFontPlayer){setAudio(soundFontPlayer);});},[]);useEffect(function(){if(audio){handleClick();}},[audio]);return/*#__PURE__*/React.createElement(\"div\",{id:\"canvasBorder\"},/*#__PURE__*/React.createElement(\"div\",{id:\"frame1\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:function onClick(){return setOctave(1);}},/*#__PURE__*/React.createElement(\"i\",null,\"1\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:function onClick(){return setOctave(2);}},/*#__PURE__*/React.createElement(\"i\",null,\"2\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:function onClick(){return setOctave(3);}},/*#__PURE__*/React.createElement(\"i\",null,\"3\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:function onClick(){return setOctave(4);}},/*#__PURE__*/React.createElement(\"i\",null,\"4\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:function onClick(){return setOctave(5);}},/*#__PURE__*/React.createElement(\"i\",null,\"5\"))),/*#__PURE__*/React.createElement(\"div\",{id:\"cava_draw\"},/*#__PURE__*/React.createElement(Canvas,{keycode:key,setKey:setKey,allData:allData,setAllData:setAllData,scale:octave}),/*#__PURE__*/React.createElement(ChordsAnimation,{curr_chord:chord,playChord:playChord,setPlayChord:setPlayChord}),/*#__PURE__*/React.createElement(\"div\",{id:\"circle_center\"})),/*#__PURE__*/React.createElement(\"div\",{id:\"frame2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"instru\"},/*#__PURE__*/React.createElement(\"p\",null,\"You could write your melody on this vinyl record in these steps:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Set browser window full screen\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Choose an octave by clicking one of top-left buttons\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Play notes by pressing keyboard keys: \\\"        a   w  s   e   d   f   t   g   y   h   u   j\\\"\",/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"br\",null),\"Then, you will hear and see the best fitting chords for your melody!\")),/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.peiyuhyu.com/2020/10/19/i-design-a-music-visualization/\"},\"Learn More\")));}export default App;","map":{"version":3,"sources":["/Users/sylviayu/Desktop/project/create-vinyl-record/src/App.js"],"names":["React","Canvas","useState","useEffect","useEventListener","ChordsAnimation","initialData","chordsData","App","key","setKey","octave","setOctave","allData","setAllData","audio","setAudio","pitch","setPitch","chord","setChord","playChord","setPlayChord","process_chord","new_pitch","ind","Object","keys","length","all_notes","forEach","item","index","arr","event","temp","filter","localeCompare","note","play","console","log","handleClick","Soundfont","require","audioContext","AudioContext","instrument","then","soundFontPlayer"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Canvas from './Draw/Canvas'\nimport './App.css'\n// import CanvasDraw from './CanvasDraw'\n// import useKey from './useKey'\nimport { useState, useEffect } from 'react'\nimport useEventListener from \"./use-event-listener\";\nimport ChordsAnimation from \"./Draw/ChordsAnmation\"\n\n\nimport initialData from \"./Data/initialData\";\nimport chordsData from \"./Data/chordsData\"\n\n\nfunction App() {\n\n  const [key, setKey] = useState('');\n\n  const [octave, setOctave] = useState(3)\n\n  const [allData,  setAllData] = useState(initialData)\n\n  const [audio, setAudio] = useState(null)\n\n  const [pitch, setPitch] = useState()\n\n  const [chord, setChord] = useState({})  \n  const [playChord, setPlayChord] =useState(false)\n\n\n\n  const process_chord = ((new_pitch) => {\n    if (!(new_pitch in chord)  && !playChord){\n\n\n      let ind = chordsData[new_pitch]\n\n      setChord({...chord, [new_pitch]:ind})\n      \n      if (Object.keys(chord).length >2){\n        setPlayChord(true)\n        let all_notes= Object.keys(chord)\n        all_notes.forEach((item, index, arr) => {\n          arr[index] = item+\"5\"\n        })\n\n        setChord({})\n        \n      }\n    }\n  })\n\n  useEventListener(\n    \"keydown\", \n    (event) => \n    {setKey(event.key) \n    let temp = allData[1].filter(item => {\n \n      return ((item.key).localeCompare(event.key) == 0)\n     \n    })[0]\n    if (typeof temp === 'undefined'){\n        return\n     }\n     setPitch(temp.pitch)\n     process_chord(temp.pitch)\n\n \n  }\n  );\n\n  useEffect(()=> {\n    let note = pitch +octave\n    if (audio){\n      \n      audio.play(note)\n      setPitch('')\n    }else {\n        console.log(\"not set yet\")\n        \n    }\n\n  }\n  ,[pitch])\n\n\n  const handleClick = () => {\n\n    let note = pitch +octave\n    if (audio){\n      audio.play(note)\n      \n    }\n    else {\n      console.log(\"not set yet\")\n    }\n\n  };\n  useEffect(()=>{\n\n    var Soundfont = require('soundfont-player')\n    var  audioContext = new AudioContext()\n    Soundfont.instrument(audioContext, 'acoustic_grand_piano')\n      .then(soundFontPlayer => {\n        setAudio(soundFontPlayer)\n      })\n  }, [])\n\n  useEffect(()=>{\n    if (audio) {\n        handleClick()\n    }\n  }, [audio]);\n\n\n  \n  return (\n\n  <div id=\"canvasBorder\">\n       <div id=\"frame1\">\n      <button className=\"btn\" onClick={() => setOctave(1)}>\n      <i>1</i>\n      </button>\n        <button className=\"btn\" onClick={() => setOctave(2)}>\n      <i>2</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(3)}>\n      <i>3</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(4)}>\n      <i>4</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(5)}>\n      <i>5</i>\n      </button>\n \n    </div>\n\n\n    <div id='cava_draw'>\n   \n    {/* <span id='chord_name' style={{\n            fontSize: font\n          }}>{chordName}</span> */}\n    <Canvas keycode={key} setKey={setKey} allData={allData} setAllData={setAllData} scale={octave}/>\n    <ChordsAnimation curr_chord={chord} playChord={playChord} setPlayChord={setPlayChord}/>\n    <div id=\"circle_center\"></div>\n    </div>\n   \n    <div id=\"frame2\">\n      <div className=\"instru\">\n      <p >\n        You could write your melody on this vinyl record in these steps:\n        <br /><br /><br />\n        Set browser window full screen\n        <br /><br />\n\n        Choose an octave by clicking one of top-left buttons\n        <br /><br />\n\n        Play notes by pressing keyboard keys:\n        \"        a   w  s   e   d   f   t   g   y   h   u   j\" \n        <br /> <br /> <br />\n \n        Then, you will hear and see the best fitting chords for your melody! \n\n\n      </p>\n      </div>\n      <a href=\"https://www.peiyuhyu.com/2020/10/19/i-design-a-music-visualization/\">Learn More</a>\n \n    </div>\n \n\n\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}