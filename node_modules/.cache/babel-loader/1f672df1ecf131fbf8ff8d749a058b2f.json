{"ast":null,"code":"var _jsxFileName = \"/Users/sylviayu/Desktop/project/create-vinyl-record/src/App.js\";\nimport React from 'react';\nimport Canvas from './Canvas';\nimport './App.css'; // import CanvasDraw from './CanvasDraw'\n// import useKey from './useKey'\n\nimport { useState, useEffect } from 'react';\nimport useEventListener from \"./use-event-listener\";\nimport ChordsAnimation from \"./ChordsAnmation\";\nimport initialData from \"./initialData\";\nimport chordsData from \"./chordsData\";\n\nfunction App() {\n  const [key, setKey] = useState('');\n  const [octave, setOctave] = useState(3);\n  const [allData, setAllData] = useState(initialData);\n  const [audio, setAudio] = useState(null);\n  const [pitch, setPitch] = useState();\n  const [chord, setChord] = useState({});\n  const [playChord, setPlayChord] = useState(false); // const [chordName, setChordName] = useState('')\n\n  const [font, setFont] = useState(\"8px\"); // const pianissimo = require(\"pianissimo\");\n\n  const process_chord = new_pitch => {\n    if (!(new_pitch in chord) && !playChord) {\n      let ind = chordsData[new_pitch];\n      setChord({ ...chord,\n        [new_pitch]: ind\n      });\n\n      if (Object.keys(chord).length > 2) {\n        setPlayChord(true);\n        let all_notes = Object.keys(chord);\n        all_notes.forEach((item, index, arr) => {\n          arr[index] = item + \"5\";\n        }); // let name = pianissimo.chord(all_notes).findBestName()\n        // if (name.localeCompare('can\\'t find name') == 0){\n        //   setChordName('');\n        // }\n        // else{\n        // setChordName(name);\n        // }\n        // if (name.length > 11){\n        //   setFont(\"6px\")\n        // }else if (name.length > 7){\n        //   setFont(\"8px\")\n        // } else if (name.length <4){\n        //   setFont(\"13px\")\n        // } else {\n        //   setFont(\"10px\")\n        // }\n        // GÎ”sus4'\n\n        setChord({});\n      }\n    }\n  };\n\n  useEventListener(\"keydown\", event => {\n    setKey(event.key);\n    let temp = allData[1].filter(item => {\n      return item.key.localeCompare(event.key) == 0;\n    })[0];\n    setPitch(temp.pitch);\n    process_chord(temp.pitch);\n  });\n  useEffect(() => {\n    let note = pitch + octave;\n\n    if (audio) {\n      audio.play(note);\n      setPitch('');\n    } else {\n      console.log(\"not set yet\");\n    }\n  }, [pitch]);\n\n  const handleClick = () => {\n    let note = pitch + octave;\n\n    if (audio) {\n      audio.play(note);\n    } else {\n      console.log(\"not set yet\");\n    }\n  };\n\n  useEffect(() => {\n    var Soundfont = require('soundfont-player');\n\n    var audioContext = new AudioContext();\n    Soundfont.instrument(audioContext, 'acoustic_grand_piano').then(soundFontPlayer => {\n      setAudio(soundFontPlayer);\n    });\n  }, []);\n  useEffect(() => {\n    if (audio) {\n      handleClick();\n    }\n  }, [audio]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"canvasBorder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"frame1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: () => setOctave(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, \"1\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: () => setOctave(2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, \"2\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: () => setOctave(3),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, \"3\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: () => setOctave(4),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, \"4\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: () => setOctave(5),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, \"5\"))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"cava_draw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"circle_center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Canvas, {\n    keycode: key,\n    setKey: setKey,\n    allData: allData,\n    setAllData: setAllData,\n    scale: octave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(ChordsAnimation, {\n    curr_chord: chord,\n    playChord: playChord,\n    setPlayChord: setPlayChord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"frame2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://www.peiyuhyu.com/2020/10/19/i-design-a-visualization/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, \"Learn More\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sylviayu/Desktop/project/create-vinyl-record/src/App.js"],"names":["React","Canvas","useState","useEffect","useEventListener","ChordsAnimation","initialData","chordsData","App","key","setKey","octave","setOctave","allData","setAllData","audio","setAudio","pitch","setPitch","chord","setChord","playChord","setPlayChord","font","setFont","process_chord","new_pitch","ind","Object","keys","length","all_notes","forEach","item","index","arr","event","temp","filter","localeCompare","note","play","console","log","handleClick","Soundfont","require","audioContext","AudioContext","instrument","then","soundFontPlayer"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Canvas from './Canvas'\nimport './App.css'\n// import CanvasDraw from './CanvasDraw'\n// import useKey from './useKey'\nimport { useState, useEffect } from 'react'\nimport useEventListener from \"./use-event-listener\";\nimport ChordsAnimation from \"./ChordsAnmation\"\n\n\nimport initialData from \"./initialData\";\nimport chordsData from \"./chordsData\"\n\n\nfunction App() {\n\n  const [key, setKey] = useState('');\n\n  const [octave, setOctave] = useState(3)\n\n  const [allData,  setAllData] = useState(initialData)\n\n  const [audio, setAudio] = useState(null)\n\n  const [pitch, setPitch] = useState()\n\n  const [chord, setChord] = useState({})  \n  const [playChord, setPlayChord] =useState(false)\n  // const [chordName, setChordName] = useState('')\n\n  const [font, setFont] = useState(\"8px\")\n\n  // const pianissimo = require(\"pianissimo\");\n\n\n  const process_chord = ((new_pitch) => {\n    if (!(new_pitch in chord)  && !playChord){\n\n\n      let ind = chordsData[new_pitch]\n\n      setChord({...chord, [new_pitch]:ind})\n      \n      if (Object.keys(chord).length >2){\n        setPlayChord(true)\n        let all_notes= Object.keys(chord)\n        all_notes.forEach((item, index, arr) => {\n          arr[index] = item+\"5\"\n        })\n        // let name = pianissimo.chord(all_notes).findBestName()\n        \n        // if (name.localeCompare('can\\'t find name') == 0){\n        //   setChordName('');\n        // }\n        // else{\n        // setChordName(name);\n        // }\n\n        // if (name.length > 11){\n        //   setFont(\"6px\")\n\n        // }else if (name.length > 7){\n        //   setFont(\"8px\")\n\n        // } else if (name.length <4){\n        //   setFont(\"13px\")\n        // } else {\n        //   setFont(\"10px\")\n        // }\n        // GÎ”sus4'\n\n        setChord({})\n        \n      }\n    }\n  })\n\n  useEventListener(\n    \"keydown\", \n    (event) => \n    {setKey(event.key) \n    let temp = allData[1].filter(item => {\n \n      return ((item.key).localeCompare(event.key) == 0)\n     \n    })[0]\n    setPitch(temp.pitch)\n    process_chord(temp.pitch)\n\n \n  }\n  );\n\n  useEffect(()=> {\n    let note = pitch +octave\n    if (audio){\n      \n      audio.play(note)\n      setPitch('')\n    }else {\n        console.log(\"not set yet\")\n        \n    }\n\n  }\n  ,[pitch])\n\n\n  const handleClick = () => {\n\n    let note = pitch +octave\n    if (audio){\n      audio.play(note)\n      \n    }\n    else {\n      console.log(\"not set yet\")\n    }\n\n  };\n  useEffect(()=>{\n\n    var Soundfont = require('soundfont-player')\n    var  audioContext = new AudioContext()\n    Soundfont.instrument(audioContext, 'acoustic_grand_piano')\n      .then(soundFontPlayer => {\n        setAudio(soundFontPlayer)\n      })\n  }, [])\n\n  useEffect(()=>{\n    if (audio) {\n        handleClick()\n    }\n  }, [audio]);\n\n\n  \n  return (\n\n  <div id=\"canvasBorder\">\n       <div id=\"frame1\">\n      <button className=\"btn\" onClick={() => setOctave(1)}>\n      <i>1</i>\n      </button>\n        <button className=\"btn\" onClick={() => setOctave(2)}>\n      <i>2</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(3)}>\n      <i>3</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(4)}>\n      <i>4</i>\n      </button>\n      <button className=\"btn\" onClick={() => setOctave(5)}>\n      <i>5</i>\n      </button>\n \n    </div>\n\n\n    <div id='cava_draw'>\n    <div id=\"circle_center\"></div>\n    {/* <span id='chord_name' style={{\n            fontSize: font\n          }}>{chordName}</span> */}\n    <Canvas keycode={key} setKey={setKey} allData={allData} setAllData={setAllData} scale={octave}/>\n    <ChordsAnimation curr_chord={chord} playChord={playChord} setPlayChord={setPlayChord}/>\n  \n    </div>\n    <div id=\"frame2\">\n      <a href=\"https://www.peiyuhyu.com/2020/10/19/i-design-a-visualization/\">Learn More</a>\n \n    </div>\n \n\n\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}