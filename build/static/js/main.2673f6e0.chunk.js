(this["webpackJsonpcreate-vinyl-record"]=this["webpackJsonpcreate-vinyl-record"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(5),i=n.n(r),o=(n(12),n(2)),l=n(6),u=n(1),s=function(e,t){var n=e.replace("#",""),a=parseInt(n.substring(0,2),16),c=parseInt(n.substring(2,4),16),r=parseInt(n.substring(4,6),16);return"rgba(".concat(a,",").concat(c,",").concat(r,",").concat(t/100,")")},f=function(e){var t=e.keycode,n=e.setKey,r=e.allData,i=e.setAllData,o=e.scale,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=l.current,a=e.getContext("2d"),c=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}(a),f=window.getComputedStyle(e).getPropertyValue("width").slice(0,-2),d=getComputedStyle(e).getPropertyValue("height").slice(0,-2);e.width=f*c,e.height=d*c,e.style.width="".concat(f,"px"),e.style.height="".concat(d,"px"),function(e,a){var c={};Object.keys(r).forEach((function(e){if(e==o){for(var n=0;n<r[e].length;n++){var a=r[e][n];0==a.key.localeCompare(t)&&(a.opa+=5,a.col_display=s(a.col_origin,a.opa))}c[e]=r[e]}else c[e]=r[e]})),i(c),Object.entries(r).forEach((function(t){var n=Object(u.a)(t,2),a=n[0];n[1].forEach((function(t,n){e.beginPath(),e.lineWidth=20,e.strokeStyle=t.col_display;var c=2*Math.PI/12,r=n*c,i=60*a;e.arc(350,350,i,r,c+r),e.stroke()}))})),n("")}(a)}),[t]),c.a.createElement("canvas",{ref:l,style:{width:window.innerWidth,height:window.innerHeigh}})};n(13);var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,c=Object(a.useRef)();Object(a.useEffect)((function(){c.current=t}),[t]),Object(a.useEffect)((function(){if("undefined"!==typeof n){var t=function(e){return c.current(e)};return n.addEventListener(e,t),function(){return n.removeEventListener(e,t)}}}),[e])},b=function(e){var t=e.curr_chord,r=e.playChord,i=e.setPlayChord,o=Object(a.useState)(null),l=Object(u.a)(o,2),s=l[0],f=l[1],d=Object(a.useState)(),b=Object(u.a)(d,2),h=b[0],m=b[1],y=Object(a.useRef)(null),E=function(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="white";var n=350,a=350;h&&Object.keys(h).forEach((function(c){e.beginPath();var r=15+30*h[c];e.arc(n+330*Math.cos(r*Math.PI/180),a+330*Math.sin(r*Math.PI/180),8*Math.pow(Math.sin(.05*t),2),0,2*Math.PI),e.fill()}))};return Object(a.useEffect)((function(){var e=n(4),t=new AudioContext;e.instrument(t,"marimba").then((function(e){f(e)}))}),[]),Object(a.useEffect)((function(){s&&r&&(s&&(m(t),Object.keys(t).forEach((function(e){return s.play(e+"4")}))),i(!1))}),[s,r]),Object(a.useEffect)((function(){var e,t=y.current,n=t.getContext("2d"),a=0,c=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}(n),r=window.getComputedStyle(t).getPropertyValue("width").slice(0,-2),i=getComputedStyle(t).getPropertyValue("height").slice(0,-2);t.width=r*c,t.height=i*c,t.style.width="".concat(r,"px"),t.style.height="".concat(i,"px");return function t(){a++,E(n,a),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[E]),c.a.createElement("canvas",{ref:y,style:{width:window.innerWidth,height:window.innerHeigh}})},h={1:["#F8B3B9","#FAC8B5","#FDD8B2","#ffecb3","#fff9c4","#dcedc8","#c8e6c9","#b2dfdb","#b2ebf2","#bbdefb","#c5cae9","#E3C3E4"],2:["#F4879","#F8A98C","#FBC286","#ffe082","#fff59d","#c5e1a5","#a5d6a7","#80cbc4","#80deea","#90caf9","#9fa8da","#D3A1D4"],3:["#F05A67","#F58960","#FAAB58","#ffd54f","#fff176","#aed581","#81c784","#4db6ac","#4dd0e1","#64b5f6","#7986cb","#C37DC4"],4:["#D44F5B","#D87955","#dd974e","#e3b700","#fdd835","#7cb342","#43a047","#00897b","#00acc1","#2A91C2","#673ab7","#AC6EAD"],5:["#B7444E","#BA6849","#b67939","#cea706","#fbc02d","#689f38","#388e3c","#00796b","#0097a7","#0d47a1","#4527a0","#945F95"]},m=["a","w","s","e","d","f","t","g","y","h","u","j"],y=Array(12).fill(0),E=Array(12).fill("white"),g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],w={};Object.keys(h).forEach((function(e){var t=[],n={key:m,col_display:E,opa:y,col_origin:h[e],pitch:g};Object.keys(n).forEach((function(e){n[e].forEach((function(n,a){t[a]||(t[a]={}),t[a][e]=n}))})),w[e]=t}));var v=w,p={};["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].forEach((function(e,t){p[e]=t}));var j=p;var k=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),r=t[0],i=t[1],s=Object(a.useState)(3),h=Object(u.a)(s,2),m=h[0],y=h[1],E=Object(a.useState)(v),g=Object(u.a)(E,2),w=g[0],p=g[1],k=Object(a.useState)(null),O=Object(u.a)(k,2),C=O[0],S=O[1],P=Object(a.useState)(),x=Object(u.a)(P,2),A=x[0],B=x[1],R=Object(a.useState)({}),F=Object(u.a)(R,2),D=F[0],_=F[1],M=Object(a.useState)(!1),I=Object(u.a)(M,2),N=I[0],W=I[1];return d("keydown",(function(e){i(e.key);var t=w[1].filter((function(t){return 0==t.key.localeCompare(e.key)}))[0];"undefined"!==typeof t&&(B(t.pitch),function(e){if(!(e in D)&&!N){var t=j[e];if(_(Object(l.a)({},D,Object(o.a)({},e,t))),Object.keys(D).length>2)W(!0),Object.keys(D).forEach((function(e,t,n){n[t]=e+"5"})),_({})}}(t.pitch))})),Object(a.useEffect)((function(){var e=A+m;C?(C.play(e),B("")):console.log("not set yet")}),[A]),Object(a.useEffect)((function(){var e=n(4),t=new AudioContext;e.instrument(t,"acoustic_grand_piano").then((function(e){S(e)}))}),[]),Object(a.useEffect)((function(){C&&function(){var e=A+m;C?C.play(e):console.log("not set yet")}()}),[C]),c.a.createElement("div",{id:"canvasBorder"},c.a.createElement("div",{id:"frame1"},c.a.createElement("button",{className:"btn",onClick:function(){return y(1)}},c.a.createElement("i",null,"1")),c.a.createElement("button",{className:"btn",onClick:function(){return y(2)}},c.a.createElement("i",null,"2")),c.a.createElement("button",{className:"btn",onClick:function(){return y(3)}},c.a.createElement("i",null,"3")),c.a.createElement("button",{className:"btn",onClick:function(){return y(4)}},c.a.createElement("i",null,"4")),c.a.createElement("button",{className:"btn",onClick:function(){return y(5)}},c.a.createElement("i",null,"5"))),c.a.createElement("div",{id:"cava_draw"},c.a.createElement(f,{keycode:r,setKey:i,allData:w,setAllData:p,scale:m}),c.a.createElement(b,{curr_chord:D,playChord:N,setPlayChord:W}),c.a.createElement("div",{id:"circle_center"})),c.a.createElement("div",{id:"frame2"},c.a.createElement("div",{className:"instru"},c.a.createElement("p",null,"You could write your melody on this vinyl record in these steps:",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),"Set browser window full screen",c.a.createElement("br",null),c.a.createElement("br",null),"Choose an octave by clicking one of top-left buttons",c.a.createElement("br",null),c.a.createElement("br",null),'Play notes by pressing keyboard keys: "        a   w  s   e   d   f   t   g   y   h   u   j"',c.a.createElement("br",null)," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),"Then, you will hear and see the best fitting chords for your melody!")),c.a.createElement("a",{href:"https://www.peiyuhyu.com/2020/10/19/i-design-a-music-visualization/"},"Learn More")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(28)}},[[7,1,2]]]);
//# sourceMappingURL=main.2673f6e0.chunk.js.map